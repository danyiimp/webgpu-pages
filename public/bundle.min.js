/*! For license information please see bundle.min.js.LICENSE.txt */
(()=>{"use strict";var t={"./src/camera.ts":(t,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OrbitCamera=void 0;const r=e("./node_modules/wgpu-matrix/dist/3.x/wgpu-matrix.module.js");class o{constructor(){this.matrix_=r.mat4.identity(),this.view_=r.mat4.create(),this.right_=new Float32Array(this.matrix_.buffer,0,4),this.up_=new Float32Array(this.matrix_.buffer,16,4),this.back_=new Float32Array(this.matrix_.buffer,32,4),this.position_=new Float32Array(this.matrix_.buffer,48,4)}get matrix(){return this.matrix_}set matrix(t){r.mat4.copy(t,this.matrix_)}get view(){return this.view_}set view(t){r.mat4.copy(t,this.view_)}get right(){return this.right_}set right(t){r.vec3.copy(t,this.right_)}get up(){return this.up_}set up(t){r.vec3.copy(t,this.up_)}get back(){return this.back_}set back(t){r.vec3.copy(t,this.back_)}get position(){return this.position_}set position(t){r.vec3.copy(t,this.position_)}}n.OrbitCamera=class extends o{get axis(){return this.axis_}set axis(t){r.vec3.copy(t,this.axis_)}constructor(t){super(),this.projectionMatrix=r.mat4.perspective(2*Math.PI/5,1,1,100),this.distance=0,this.angularVelocity=0,this.axis_=r.vec3.create(),this.rotationSpeed=1,this.zoomSpeed=.1,this.frictionCoefficient=.5,t&&(t.position&&(this.position=t.position,this.distance=r.vec3.len(this.position),this.back=r.vec3.normalize(this.position),this.recalcuateRight(),this.recalcuateUp()),t.inputHandler&&(this.inputHandler=t.inputHandler))}get matrix(){return super.matrix}set matrix(t){super.matrix=t,this.distance=r.vec3.len(this.position)}update(t){const n=this.inputHandler(),e=n.canvas.width/n.canvas.height;this.projectionMatrix=r.mat4.perspective(2*Math.PI/8,e,1,100),n.touching?this.angularVelocity=0:this.angularVelocity*=Math.pow(1-this.frictionCoefficient,t);const o=r.vec3.create();r.vec3.addScaled(o,this.right,n.x,o),r.vec3.addScaled(o,this.up,-n.y,o);const i=r.vec3.cross(o,this.back),s=r.vec3.len(i);s>1e-7&&(this.axis=r.vec3.scale(i,1/s),this.angularVelocity=s*this.rotationSpeed);const a=this.angularVelocity*t;var c,u,h;return a>1e-7&&(this.back=r.vec3.normalize((c=this.back,u=this.axis,h=a,r.vec3.transformMat4Upper3x3(c,r.mat4.rotation(u,h)))),this.recalcuateRight(),this.recalcuateUp()),0!==n.zoom&&(this.distance*=1+n.zoom*this.zoomSpeed),this.position=r.vec3.scale(this.back,this.distance),this.view=r.mat4.invert(this.matrix),r.mat4.multiply(this.projectionMatrix,this.view)}recalcuateRight(){this.right=r.vec3.normalize(r.vec3.cross(this.up,this.back))}recalcuateUp(){this.up=r.vec3.normalize(r.vec3.cross(this.back,this.right))}}},"./src/index.ts":function(t,n,e){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const o=r(e("./src/renderer.ts")),i=e("./src/input.ts"),s=e("./src/camera.ts"),a=e("./node_modules/wgpu-matrix/dist/3.x/wgpu-matrix.module.js"),c=document.getElementById("gfx"),u=new s.OrbitCamera({position:a.vec3.create(3,5,5),inputHandler:(0,i.createInputHandler)(c)});new o.default(c,u).start()},"./src/input.ts":(t,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createInputHandler=function(t){let n=0,e=0,r=0,o=!1;return t.style.touchAction="pinch-zoom",t.addEventListener("pointerdown",(()=>{o=!0})),t.addEventListener("pointerup",(()=>{o=!1})),t.addEventListener("pointermove",(t=>{o="mouse"!=t.pointerType||!!(1&t.buttons),o&&(n+=t.movementX,e+=t.movementY)})),t.addEventListener("wheel",(t=>{r+=Math.sign(t.deltaY),t.preventDefault(),t.stopPropagation()}),{passive:!1}),()=>{const i={canvas:t,x:n,y:e,zoom:r,touching:o};return n=0,e=0,r=0,i}}},"./src/renderer.ts":function(t,n,e){var r=this&&this.__awaiter||function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,a)}c((r=r.apply(t,n||[])).next())}))},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const i=e("./node_modules/wgpu-matrix/dist/3.x/wgpu-matrix.module.js"),s=o(e("./src/shaders/basic.vert.wgsl")),a=o(e("./src/shaders/basic.frag.wgsl")),c=new Float32Array([Math.sqrt(8/9),0,-1/3,-Math.sqrt(2/9),Math.sqrt(2/3),-1/3,-Math.sqrt(2/9),-Math.sqrt(2/3),-1/3,0,0,1]),u=new Float32Array([1,0,0,0,1,0,0,0,1,0,0,0]),h=new Uint16Array([0,1,2,0,2,3,0,3,1,1,3,2]);let f=Date.now();n.default=class{constructor(t,n){this.render=()=>{const t=Date.now(),n=(t-f)/1e3;f=t;const e=this.camera.update(n);this.queue.writeBuffer(this.uniformBuffer,0,e.buffer,e.byteOffset,e.byteLength),this.colorTexture=this.context.getCurrentTexture(),this.colorTextureView=this.colorTexture.createView(),this.encodeCommands(),requestAnimationFrame(this.render)},this.canvas=t,this.camera=n}start(){return r(this,void 0,void 0,(function*(){(yield this.initializeAPI())&&(this.resizeBackings(),yield this.initializeResources(),new ResizeObserver((t=>{for(const n of t){const t=n.contentBoxSize[0].inlineSize,e=n.contentBoxSize[0].blockSize;this.canvas.width=Math.max(1,Math.min(t,this.device.limits.maxTextureDimension2D)),this.canvas.height=Math.max(1,Math.min(e,this.device.limits.maxTextureDimension2D)),this.resizeBackings()}})).observe(this.canvas),this.render())}))}initializeAPI(){return r(this,void 0,void 0,(function*(){try{const t=navigator.gpu;if(!t)return!1;this.adapter=yield t.requestAdapter(),this.device=yield this.adapter.requestDevice(),this.queue=this.device.queue}catch(t){return console.error(t),!1}return!0}))}initializeResources(){return r(this,void 0,void 0,(function*(){const t=(t,n)=>{let e={size:t.byteLength+3&-4,usage:n,mappedAtCreation:!0},r=this.device.createBuffer(e);return(t instanceof Uint16Array?new Uint16Array(r.getMappedRange()):new Float32Array(r.getMappedRange())).set(t),r.unmap(),r};this.positionBuffer=t(c,GPUBufferUsage.VERTEX),this.colorBuffer=t(u,GPUBufferUsage.VERTEX),this.indexBuffer=t(h,GPUBufferUsage.INDEX),this.uniformBuffer=t(function(){const t=i.mat4.perspective(2*Math.PI/5,1,1,100),n=i.mat4.identity();return i.mat4.translate(n,i.vec3.fromValues(0,0,-3),n),i.mat4.multiply(t,n)}(),GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST);const n={code:s.default};this.vertModule=this.device.createShaderModule(n);const e={code:a.default};this.fragModule=this.device.createShaderModule(e);const r=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{}}]});this.uniformBindGroup=this.device.createBindGroup({layout:r,entries:[{binding:0,resource:{buffer:this.uniformBuffer}}]});const o={bindGroupLayouts:[r]},f={layout:this.device.createPipelineLayout(o),vertex:{module:this.vertModule,entryPoint:"main",buffers:[{attributes:[{shaderLocation:0,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"vertex"},{attributes:[{shaderLocation:1,offset:0,format:"float32x3"}],arrayStride:12,stepMode:"vertex"}]},fragment:{module:this.fragModule,entryPoint:"main",targets:[{format:"bgra8unorm"}]},primitive:{frontFace:"cw",cullMode:"none",topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus-stencil8"}};this.pipeline=this.device.createRenderPipeline(f)}))}resizeBackings(){if(!this.context){this.context=this.canvas.getContext("webgpu");const t={device:this.device,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:"opaque"};this.context.configure(t)}const t={size:[this.canvas.width,this.canvas.height,1],dimension:"2d",format:"depth24plus-stencil8",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC};this.depthTexture=this.device.createTexture(t),this.depthTextureView=this.depthTexture.createView()}encodeCommands(){const t={colorAttachments:[{view:this.colorTextureView,clearValue:{r:.5,g:.5,b:.5,a:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:this.depthTextureView,depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store",stencilClearValue:0,stencilLoadOp:"clear",stencilStoreOp:"store"}};this.commandEncoder=this.device.createCommandEncoder(),this.passEncoder=this.commandEncoder.beginRenderPass(t),this.passEncoder.setPipeline(this.pipeline),this.passEncoder.setViewport(0,0,this.canvas.width,this.canvas.height,0,1),this.passEncoder.setScissorRect(0,0,this.canvas.width,this.canvas.height),this.passEncoder.setVertexBuffer(0,this.positionBuffer),this.passEncoder.setVertexBuffer(1,this.colorBuffer),this.passEncoder.setIndexBuffer(this.indexBuffer,"uint16"),this.passEncoder.setBindGroup(0,this.uniformBindGroup),this.passEncoder.drawIndexed(h.length,1),this.passEncoder.end(),this.queue.submit([this.commandEncoder.finish()])}}},"./src/shaders/basic.frag.wgsl":t=>{t.exports="@fragment\r\nfn main(@location(0) inColor: vec3f) -> @location(0) vec4f {\r\n    return vec4f(inColor, 1);\r\n}\r\n"},"./src/shaders/basic.vert.wgsl":t=>{t.exports="struct UBO {\r\n    modelViewProjectionMatrix : mat4x4<f32>,\r\n}\r\n@group(0) @binding(0)  \r\nvar<uniform> uniforms : UBO;\r\n\r\nstruct VSOut {\r\n    @builtin(position) pos: vec4f,\r\n    @location(0) color: vec3f,\r\n };\r\n\r\n@vertex\r\nfn main(\r\n    @location(0) inPos : vec3f,\r\n    @location(1) inColor : vec3f\r\n) -> VSOut {\r\n    var vs_out : VSOut;\r\n    vs_out.pos = uniforms.modelViewProjectionMatrix * vec4f(inPos, 1);\r\n    vs_out.color = inColor;\r\n    return vs_out;\r\n}"},"./node_modules/wgpu-matrix/dist/3.x/wgpu-matrix.module.js":(t,n,e)=>{e.r(n),e.d(n,{mat3:()=>y,mat3d:()=>P,mat3n:()=>O,mat4:()=>b,mat4d:()=>z,mat4n:()=>U,quat:()=>q,quatd:()=>E,quatn:()=>R,utils:()=>a,vec2:()=>S,vec2d:()=>T,vec2n:()=>C,vec3:()=>_,vec3d:()=>V,vec3n:()=>k,vec4:()=>A,vec4d:()=>B,vec4n:()=>F});const r=(o=Array,i=t=>t.fill(0),class extends o{constructor(...t){super(...t),i(this)}});var o,i;let s=1e-6;var a={__proto__:null,get EPSILON(){return s},degToRad:function(t){return t*Math.PI/180},euclideanModulo:function(t,n){return(t%n+n)%n},inverseLerp:function(t,n,e){const r=n-t;return Math.abs(n-t)<s?t:(e-t)/r},lerp:function(t,n,e){return t+(n-t)*e},radToDeg:function(t){return 180*t/Math.PI},setEpsilon:function(t){const n=s;return s=t,n}};const c=new Map;function u(t){let n=c.get(t);return n||(n=function(t){function n(n=0,e=0){const r=new t(2);return void 0!==n&&(r[0]=n,void 0!==e&&(r[1]=e)),r}function e(n,e,r){const o=r??new t(2);return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o}function r(n,e,r,o){const i=o??new t(2);return i[0]=n[0]+r*(e[0]-n[0]),i[1]=n[1]+r*(e[1]-n[1]),i}function o(n,e,r){const o=r??new t(2);return o[0]=n[0]*e,o[1]=n[1]*e,o}function i(n,e){const r=e??new t(2);return r[0]=1/n[0],r[1]=1/n[1],r}function a(t,n){return t[0]*n[0]+t[1]*n[1]}function c(t){const n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function u(t){const n=t[0],e=t[1];return n*n+e*e}function h(t,n){const e=t[0]-n[0],r=t[1]-n[1];return Math.sqrt(e*e+r*r)}function f(t,n){const e=t[0]-n[0],r=t[1]-n[1];return e*e+r*r}function l(n,e){const r=e??new t(2),o=n[0],i=n[1],s=Math.sqrt(o*o+i*i);return s>1e-5?(r[0]=o/s,r[1]=i/s):(r[0]=0,r[1]=0),r}function d(n,e){const r=e??new t(2);return r[0]=n[0],r[1]=n[1],r}function m(n,e,r){const o=r??new t(2);return o[0]=n[0]*e[0],o[1]=n[1]*e[1],o}function M(n,e,r){const o=r??new t(2);return o[0]=n[0]/e[0],o[1]=n[1]/e[1],o}function w(n,e,r){const i=r??new t(2);return l(n,i),o(i,e,i)}return{create:n,fromValues:n,set:function(n,e,r){const o=r??new t(2);return o[0]=n,o[1]=e,o},ceil:function(n,e){const r=e??new t(2);return r[0]=Math.ceil(n[0]),r[1]=Math.ceil(n[1]),r},floor:function(n,e){const r=e??new t(2);return r[0]=Math.floor(n[0]),r[1]=Math.floor(n[1]),r},round:function(n,e){const r=e??new t(2);return r[0]=Math.round(n[0]),r[1]=Math.round(n[1]),r},clamp:function(n,e=0,r=1,o){const i=o??new t(2);return i[0]=Math.min(r,Math.max(e,n[0])),i[1]=Math.min(r,Math.max(e,n[1])),i},add:function(n,e,r){const o=r??new t(2);return o[0]=n[0]+e[0],o[1]=n[1]+e[1],o},addScaled:function(n,e,r,o){const i=o??new t(2);return i[0]=n[0]+e[0]*r,i[1]=n[1]+e[1]*r,i},angle:function(t,n){const e=t[0],r=t[1],o=n[0],i=n[1],s=Math.sqrt(e*e+r*r)*Math.sqrt(o*o+i*i),c=s&&a(t,n)/s;return Math.acos(c)},subtract:e,sub:e,equalsApproximately:function(t,n){return Math.abs(t[0]-n[0])<s&&Math.abs(t[1]-n[1])<s},equals:function(t,n){return t[0]===n[0]&&t[1]===n[1]},lerp:r,lerpV:function(n,e,r,o){const i=o??new t(2);return i[0]=n[0]+r[0]*(e[0]-n[0]),i[1]=n[1]+r[1]*(e[1]-n[1]),i},max:function(n,e,r){const o=r??new t(2);return o[0]=Math.max(n[0],e[0]),o[1]=Math.max(n[1],e[1]),o},min:function(n,e,r){const o=r??new t(2);return o[0]=Math.min(n[0],e[0]),o[1]=Math.min(n[1],e[1]),o},mulScalar:o,scale:o,divScalar:function(n,e,r){const o=r??new t(2);return o[0]=n[0]/e,o[1]=n[1]/e,o},inverse:i,invert:i,cross:function(n,e,r){const o=r??new t(3),i=n[0]*e[1]-n[1]*e[0];return o[0]=0,o[1]=0,o[2]=i,o},dot:a,length:c,len:c,lengthSq:u,lenSq:u,distance:h,dist:h,distanceSq:f,distSq:f,normalize:l,negate:function(n,e){const r=e??new t(2);return r[0]=-n[0],r[1]=-n[1],r},copy:d,clone:d,multiply:m,mul:m,divide:M,div:M,random:function(n=1,e){const r=e??new t(2),o=2*Math.random()*Math.PI;return r[0]=Math.cos(o)*n,r[1]=Math.sin(o)*n,r},zero:function(n){const e=n??new t(2);return e[0]=0,e[1]=0,e},transformMat4:function(n,e,r){const o=r??new t(2),i=n[0],s=n[1];return o[0]=i*e[0]+s*e[4]+e[12],o[1]=i*e[1]+s*e[5]+e[13],o},transformMat3:function(n,e,r){const o=r??new t(2),i=n[0],s=n[1];return o[0]=e[0]*i+e[4]*s+e[8],o[1]=e[1]*i+e[5]*s+e[9],o},rotate:function(n,e,r,o){const i=o??new t(2),s=n[0]-e[0],a=n[1]-e[1],c=Math.sin(r),u=Math.cos(r);return i[0]=s*u-a*c+e[0],i[1]=s*c+a*u+e[1],i},setLength:w,truncate:function(n,e,r){const o=r??new t(2);return c(n)>e?w(n,e,o):d(n,o)},midpoint:function(n,e,o){return r(n,e,.5,o??new t(2))}}}(t),c.set(t,n)),n}const h=new Map;function f(t){let n=h.get(t);return n||(n=function(t){const n=u(t);function e(n,e){const r=e??new t(12);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[8]=n[8],r[9]=n[9],r[10]=n[10],r}function r(n){const e=n??new t(12);return e[0]=1,e[1]=0,e[2]=0,e[4]=0,e[5]=1,e[6]=0,e[8]=0,e[9]=0,e[10]=1,e}function o(n,e){const r=e??new t(12),o=n[0],i=n[1],s=n[2],a=n[4],c=n[5],u=n[6],h=n[8],f=n[9],l=n[10],d=l*c-u*f,m=-l*a+u*h,M=f*a-c*h,w=1/(o*d+i*m+s*M);return r[0]=d*w,r[1]=(-l*i+s*f)*w,r[2]=(u*i-s*c)*w,r[4]=m*w,r[5]=(l*o-s*h)*w,r[6]=(-u*o+s*a)*w,r[8]=M*w,r[9]=(-f*o+i*h)*w,r[10]=(c*o-i*a)*w,r}function i(n,e,r){const o=r??new t(12),i=n[0],s=n[1],a=n[2],c=n[4],u=n[5],h=n[6],f=n[8],l=n[9],d=n[10],m=e[0],M=e[1],w=e[2],p=e[4],v=e[5],g=e[6],x=e[8],b=e[9],y=e[10];return o[0]=i*m+c*M+f*w,o[1]=s*m+u*M+l*w,o[2]=a*m+h*M+d*w,o[4]=i*p+c*v+f*g,o[5]=s*p+u*v+l*g,o[6]=a*p+h*v+d*g,o[8]=i*x+c*b+f*y,o[9]=s*x+u*b+l*y,o[10]=a*x+h*b+d*y,o}return{clone:e,create:function(n,e,r,o,i,s,a,c,u){const h=new t(12);return h[3]=0,h[7]=0,h[11]=0,void 0!==n&&(h[0]=n,void 0!==e&&(h[1]=e,void 0!==r&&(h[2]=r,void 0!==o&&(h[4]=o,void 0!==i&&(h[5]=i,void 0!==s&&(h[6]=s,void 0!==a&&(h[8]=a,void 0!==c&&(h[9]=c,void 0!==u&&(h[10]=u))))))))),h},set:function(n,e,r,o,i,s,a,c,u,h){const f=h??new t(12);return f[0]=n,f[1]=e,f[2]=r,f[3]=0,f[4]=o,f[5]=i,f[6]=s,f[7]=0,f[8]=a,f[9]=c,f[10]=u,f[11]=0,f},fromMat4:function(n,e){const r=e??new t(12);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=0,r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=0,r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=0,r},fromQuat:function(n,e){const r=e??new t(12),o=n[0],i=n[1],s=n[2],a=n[3],c=o+o,u=i+i,h=s+s,f=o*c,l=i*c,d=i*u,m=s*c,M=s*u,w=s*h,p=a*c,v=a*u,g=a*h;return r[0]=1-d-w,r[1]=l+g,r[2]=m-v,r[3]=0,r[4]=l-g,r[5]=1-f-w,r[6]=M+p,r[7]=0,r[8]=m+v,r[9]=M-p,r[10]=1-f-d,r[11]=0,r},negate:function(n,e){const r=e??new t(12);return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r[4]=-n[4],r[5]=-n[5],r[6]=-n[6],r[8]=-n[8],r[9]=-n[9],r[10]=-n[10],r},copy:e,equalsApproximately:function(t,n){return Math.abs(t[0]-n[0])<s&&Math.abs(t[1]-n[1])<s&&Math.abs(t[2]-n[2])<s&&Math.abs(t[4]-n[4])<s&&Math.abs(t[5]-n[5])<s&&Math.abs(t[6]-n[6])<s&&Math.abs(t[8]-n[8])<s&&Math.abs(t[9]-n[9])<s&&Math.abs(t[10]-n[10])<s},equals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]},identity:r,transpose:function(n,e){const r=e??new t(12);if(r===n){let t;return t=n[1],n[1]=n[4],n[4]=t,t=n[2],n[2]=n[8],n[8]=t,t=n[6],n[6]=n[9],n[9]=t,r}const o=n[0],i=n[1],s=n[2],a=n[4],c=n[5],u=n[6],h=n[8],f=n[9],l=n[10];return r[0]=o,r[1]=a,r[2]=h,r[4]=i,r[5]=c,r[6]=f,r[8]=s,r[9]=u,r[10]=l,r},inverse:o,invert:o,determinant:function(t){const n=t[0],e=t[1],r=t[2],o=t[4],i=t[5],s=t[6],a=t[8],c=t[9],u=t[10];return n*(i*u-c*s)-o*(e*u-c*r)+a*(e*s-i*r)},mul:i,multiply:i,setTranslation:function(t,n,e){const o=e??r();return t!==o&&(o[0]=t[0],o[1]=t[1],o[2]=t[2],o[4]=t[4],o[5]=t[5],o[6]=t[6]),o[8]=n[0],o[9]=n[1],o[10]=1,o},getTranslation:function(t,e){const r=e??n.create();return r[0]=t[8],r[1]=t[9],r},getAxis:function(t,e,r){const o=r??n.create(),i=4*e;return o[0]=t[i+0],o[1]=t[i+1],o},setAxis:function(t,n,r,o){const i=o===t?t:e(t,o),s=4*r;return i[s+0]=n[0],i[s+1]=n[1],i},getScaling:function(t,e){const r=e??n.create(),o=t[0],i=t[1],s=t[4],a=t[5];return r[0]=Math.sqrt(o*o+i*i),r[1]=Math.sqrt(s*s+a*a),r},translation:function(n,e){const r=e??new t(12);return r[0]=1,r[1]=0,r[2]=0,r[4]=0,r[5]=1,r[6]=0,r[8]=n[0],r[9]=n[1],r[10]=1,r},translate:function(n,e,r){const o=r??new t(12),i=e[0],s=e[1],a=n[0],c=n[1],u=n[2],h=n[4],f=n[5],l=n[6],d=n[8],m=n[9],M=n[10];return n!==o&&(o[0]=a,o[1]=c,o[2]=u,o[4]=h,o[5]=f,o[6]=l),o[8]=a*i+h*s+d,o[9]=c*i+f*s+m,o[10]=u*i+l*s+M,o},rotation:function(n,e){const r=e??new t(12),o=Math.cos(n),i=Math.sin(n);return r[0]=o,r[1]=i,r[2]=0,r[4]=-i,r[5]=o,r[6]=0,r[8]=0,r[9]=0,r[10]=1,r},rotate:function(n,e,r){const o=r??new t(12),i=n[0],s=n[1],a=n[2],c=n[4],u=n[5],h=n[6],f=Math.cos(e),l=Math.sin(e);return o[0]=f*i+l*c,o[1]=f*s+l*u,o[2]=f*a+l*h,o[4]=f*c-l*i,o[5]=f*u-l*s,o[6]=f*h-l*a,n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10]),o},scaling:function(n,e){const r=e??new t(12);return r[0]=n[0],r[1]=0,r[2]=0,r[4]=0,r[5]=n[1],r[6]=0,r[8]=0,r[9]=0,r[10]=1,r},scale:function(n,e,r){const o=r??new t(12),i=e[0],s=e[1];return o[0]=i*n[0],o[1]=i*n[1],o[2]=i*n[2],o[4]=s*n[4],o[5]=s*n[5],o[6]=s*n[6],n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10]),o},uniformScaling:function(n,e){const r=e??new t(12);return r[0]=n,r[1]=0,r[2]=0,r[4]=0,r[5]=n,r[6]=0,r[8]=0,r[9]=0,r[10]=1,r},uniformScale:function(n,e,r){const o=r??new t(12);return o[0]=e*n[0],o[1]=e*n[1],o[2]=e*n[2],o[4]=e*n[4],o[5]=e*n[5],o[6]=e*n[6],n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10]),o}}}(t),h.set(t,n)),n}const l=new Map;function d(t){let n=l.get(t);return n||(n=function(t){function n(n,e,r){const o=new t(3);return void 0!==n&&(o[0]=n,void 0!==e&&(o[1]=e,void 0!==r&&(o[2]=r))),o}function e(n,e,r){const o=r??new t(3);return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],o}function r(n,e,r,o){const i=o??new t(3);return i[0]=n[0]+r*(e[0]-n[0]),i[1]=n[1]+r*(e[1]-n[1]),i[2]=n[2]+r*(e[2]-n[2]),i}function o(n,e,r){const o=r??new t(3);return o[0]=n[0]*e,o[1]=n[1]*e,o[2]=n[2]*e,o}function i(n,e){const r=e??new t(3);return r[0]=1/n[0],r[1]=1/n[1],r[2]=1/n[2],r}function a(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function c(t){const n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)}function u(t){const n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function h(t,n){const e=t[0]-n[0],r=t[1]-n[1],o=t[2]-n[2];return Math.sqrt(e*e+r*r+o*o)}function f(t,n){const e=t[0]-n[0],r=t[1]-n[1],o=t[2]-n[2];return e*e+r*r+o*o}function l(n,e){const r=e??new t(3),o=n[0],i=n[1],s=n[2],a=Math.sqrt(o*o+i*i+s*s);return a>1e-5?(r[0]=o/a,r[1]=i/a,r[2]=s/a):(r[0]=0,r[1]=0,r[2]=0),r}function d(n,e){const r=e??new t(3);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r}function m(n,e,r){const o=r??new t(3);return o[0]=n[0]*e[0],o[1]=n[1]*e[1],o[2]=n[2]*e[2],o}function M(n,e,r){const o=r??new t(3);return o[0]=n[0]/e[0],o[1]=n[1]/e[1],o[2]=n[2]/e[2],o}function w(n,e,r){const i=r??new t(3);return l(n,i),o(i,e,i)}return{create:n,fromValues:n,set:function(n,e,r,o){const i=o??new t(3);return i[0]=n,i[1]=e,i[2]=r,i},ceil:function(n,e){const r=e??new t(3);return r[0]=Math.ceil(n[0]),r[1]=Math.ceil(n[1]),r[2]=Math.ceil(n[2]),r},floor:function(n,e){const r=e??new t(3);return r[0]=Math.floor(n[0]),r[1]=Math.floor(n[1]),r[2]=Math.floor(n[2]),r},round:function(n,e){const r=e??new t(3);return r[0]=Math.round(n[0]),r[1]=Math.round(n[1]),r[2]=Math.round(n[2]),r},clamp:function(n,e=0,r=1,o){const i=o??new t(3);return i[0]=Math.min(r,Math.max(e,n[0])),i[1]=Math.min(r,Math.max(e,n[1])),i[2]=Math.min(r,Math.max(e,n[2])),i},add:function(n,e,r){const o=r??new t(3);return o[0]=n[0]+e[0],o[1]=n[1]+e[1],o[2]=n[2]+e[2],o},addScaled:function(n,e,r,o){const i=o??new t(3);return i[0]=n[0]+e[0]*r,i[1]=n[1]+e[1]*r,i[2]=n[2]+e[2]*r,i},angle:function(t,n){const e=t[0],r=t[1],o=t[2],i=n[0],s=n[1],c=n[2],u=Math.sqrt(e*e+r*r+o*o)*Math.sqrt(i*i+s*s+c*c),h=u&&a(t,n)/u;return Math.acos(h)},subtract:e,sub:e,equalsApproximately:function(t,n){return Math.abs(t[0]-n[0])<s&&Math.abs(t[1]-n[1])<s&&Math.abs(t[2]-n[2])<s},equals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},lerp:r,lerpV:function(n,e,r,o){const i=o??new t(3);return i[0]=n[0]+r[0]*(e[0]-n[0]),i[1]=n[1]+r[1]*(e[1]-n[1]),i[2]=n[2]+r[2]*(e[2]-n[2]),i},max:function(n,e,r){const o=r??new t(3);return o[0]=Math.max(n[0],e[0]),o[1]=Math.max(n[1],e[1]),o[2]=Math.max(n[2],e[2]),o},min:function(n,e,r){const o=r??new t(3);return o[0]=Math.min(n[0],e[0]),o[1]=Math.min(n[1],e[1]),o[2]=Math.min(n[2],e[2]),o},mulScalar:o,scale:o,divScalar:function(n,e,r){const o=r??new t(3);return o[0]=n[0]/e,o[1]=n[1]/e,o[2]=n[2]/e,o},inverse:i,invert:i,cross:function(n,e,r){const o=r??new t(3),i=n[2]*e[0]-n[0]*e[2],s=n[0]*e[1]-n[1]*e[0];return o[0]=n[1]*e[2]-n[2]*e[1],o[1]=i,o[2]=s,o},dot:a,length:c,len:c,lengthSq:u,lenSq:u,distance:h,dist:h,distanceSq:f,distSq:f,normalize:l,negate:function(n,e){const r=e??new t(3);return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r},copy:d,clone:d,multiply:m,mul:m,divide:M,div:M,random:function(n=1,e){const r=e??new t(3),o=2*Math.random()*Math.PI,i=2*Math.random()-1,s=Math.sqrt(1-i*i)*n;return r[0]=Math.cos(o)*s,r[1]=Math.sin(o)*s,r[2]=i*n,r},zero:function(n){const e=n??new t(3);return e[0]=0,e[1]=0,e[2]=0,e},transformMat4:function(n,e,r){const o=r??new t(3),i=n[0],s=n[1],a=n[2],c=e[3]*i+e[7]*s+e[11]*a+e[15]||1;return o[0]=(e[0]*i+e[4]*s+e[8]*a+e[12])/c,o[1]=(e[1]*i+e[5]*s+e[9]*a+e[13])/c,o[2]=(e[2]*i+e[6]*s+e[10]*a+e[14])/c,o},transformMat4Upper3x3:function(n,e,r){const o=r??new t(3),i=n[0],s=n[1],a=n[2];return o[0]=i*e[0]+s*e[4]+a*e[8],o[1]=i*e[1]+s*e[5]+a*e[9],o[2]=i*e[2]+s*e[6]+a*e[10],o},transformMat3:function(n,e,r){const o=r??new t(3),i=n[0],s=n[1],a=n[2];return o[0]=i*e[0]+s*e[4]+a*e[8],o[1]=i*e[1]+s*e[5]+a*e[9],o[2]=i*e[2]+s*e[6]+a*e[10],o},transformQuat:function(n,e,r){const o=r??new t(3),i=e[0],s=e[1],a=e[2],c=2*e[3],u=n[0],h=n[1],f=n[2],l=s*f-a*h,d=a*u-i*f,m=i*h-s*u;return o[0]=u+l*c+2*(s*m-a*d),o[1]=h+d*c+2*(a*l-i*m),o[2]=f+m*c+2*(i*d-s*l),o},getTranslation:function(n,e){const r=e??new t(3);return r[0]=n[12],r[1]=n[13],r[2]=n[14],r},getAxis:function(n,e,r){const o=r??new t(3),i=4*e;return o[0]=n[i+0],o[1]=n[i+1],o[2]=n[i+2],o},getScaling:function(n,e){const r=e??new t(3),o=n[0],i=n[1],s=n[2],a=n[4],c=n[5],u=n[6],h=n[8],f=n[9],l=n[10];return r[0]=Math.sqrt(o*o+i*i+s*s),r[1]=Math.sqrt(a*a+c*c+u*u),r[2]=Math.sqrt(h*h+f*f+l*l),r},rotateX:function(n,e,r,o){const i=o??new t(3),s=[],a=[];return s[0]=n[0]-e[0],s[1]=n[1]-e[1],s[2]=n[2]-e[2],a[0]=s[0],a[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),a[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),i[0]=a[0]+e[0],i[1]=a[1]+e[1],i[2]=a[2]+e[2],i},rotateY:function(n,e,r,o){const i=o??new t(3),s=[],a=[];return s[0]=n[0]-e[0],s[1]=n[1]-e[1],s[2]=n[2]-e[2],a[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),a[1]=s[1],a[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),i[0]=a[0]+e[0],i[1]=a[1]+e[1],i[2]=a[2]+e[2],i},rotateZ:function(n,e,r,o){const i=o??new t(3),s=[],a=[];return s[0]=n[0]-e[0],s[1]=n[1]-e[1],s[2]=n[2]-e[2],a[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),a[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),a[2]=s[2],i[0]=a[0]+e[0],i[1]=a[1]+e[1],i[2]=a[2]+e[2],i},setLength:w,truncate:function(n,e,r){const o=r??new t(3);return c(n)>e?w(n,e,o):d(n,o)},midpoint:function(n,e,o){return r(n,e,.5,o??new t(3))}}}(t),l.set(t,n)),n}const m=new Map;function M(t){let n=m.get(t);return n||(n=function(t){const n=d(t);function e(n,e){const r=e??new t(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}const r=e;function o(n){const e=n??new t(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function i(n,e){const r=e??new t(16),o=n[0],i=n[1],s=n[2],a=n[3],c=n[4],u=n[5],h=n[6],f=n[7],l=n[8],d=n[9],m=n[10],M=n[11],w=n[12],p=n[13],v=n[14],g=n[15],x=m*g,b=v*M,y=h*g,q=v*f,S=h*M,_=m*f,A=s*g,z=v*a,P=s*M,E=m*a,T=s*f,V=h*a,B=l*p,U=w*d,O=c*p,R=w*u,C=c*d,k=l*u,F=o*p,I=w*i,j=o*d,L=l*i,G=o*u,D=c*i,H=x*u+q*d+S*p-(b*u+y*d+_*p),X=b*i+A*d+E*p-(x*i+z*d+P*p),Y=y*i+z*u+T*p-(q*i+A*u+V*p),N=_*i+P*u+V*d-(S*i+E*u+T*d),Z=1/(o*H+c*X+l*Y+w*N);return r[0]=Z*H,r[1]=Z*X,r[2]=Z*Y,r[3]=Z*N,r[4]=Z*(b*c+y*l+_*w-(x*c+q*l+S*w)),r[5]=Z*(x*o+z*l+P*w-(b*o+A*l+E*w)),r[6]=Z*(q*o+A*c+V*w-(y*o+z*c+T*w)),r[7]=Z*(S*o+E*c+T*l-(_*o+P*c+V*l)),r[8]=Z*(B*f+R*M+C*g-(U*f+O*M+k*g)),r[9]=Z*(U*a+F*M+L*g-(B*a+I*M+j*g)),r[10]=Z*(O*a+I*f+G*g-(R*a+F*f+D*g)),r[11]=Z*(k*a+j*f+D*M-(C*a+L*f+G*M)),r[12]=Z*(O*m+k*v+U*h-(C*v+B*h+R*m)),r[13]=Z*(j*v+B*s+I*m-(F*m+L*v+U*s)),r[14]=Z*(F*h+D*v+R*s-(G*v+O*s+I*h)),r[15]=Z*(G*m+C*s+L*h-(j*h+D*m+k*s)),r}const a=i;function c(n,e,r){const o=r??new t(16),i=n[0],s=n[1],a=n[2],c=n[3],u=n[4],h=n[5],f=n[6],l=n[7],d=n[8],m=n[9],M=n[10],w=n[11],p=n[12],v=n[13],g=n[14],x=n[15],b=e[0],y=e[1],q=e[2],S=e[3],_=e[4],A=e[5],z=e[6],P=e[7],E=e[8],T=e[9],V=e[10],B=e[11],U=e[12],O=e[13],R=e[14],C=e[15];return o[0]=i*b+u*y+d*q+p*S,o[1]=s*b+h*y+m*q+v*S,o[2]=a*b+f*y+M*q+g*S,o[3]=c*b+l*y+w*q+x*S,o[4]=i*_+u*A+d*z+p*P,o[5]=s*_+h*A+m*z+v*P,o[6]=a*_+f*A+M*z+g*P,o[7]=c*_+l*A+w*z+x*P,o[8]=i*E+u*T+d*V+p*B,o[9]=s*E+h*T+m*V+v*B,o[10]=a*E+f*T+M*V+g*B,o[11]=c*E+l*T+w*V+x*B,o[12]=i*U+u*O+d*R+p*C,o[13]=s*U+h*O+m*R+v*C,o[14]=a*U+f*O+M*R+g*C,o[15]=c*U+l*O+w*R+x*C,o}const u=c,h=n.create(),f=n.create(),l=n.create();function m(n,e,r){const o=r??new t(16);let i=n[0],s=n[1],a=n[2];const c=Math.sqrt(i*i+s*s+a*a);i/=c,s/=c,a/=c;const u=i*i,h=s*s,f=a*a,l=Math.cos(e),d=Math.sin(e),m=1-l;return o[0]=u+(1-u)*l,o[1]=i*s*m+a*d,o[2]=i*a*m-s*d,o[3]=0,o[4]=i*s*m-a*d,o[5]=h+(1-h)*l,o[6]=s*a*m+i*d,o[7]=0,o[8]=i*a*m+s*d,o[9]=s*a*m-i*d,o[10]=f+(1-f)*l,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function M(n,e,r,o){const i=o??new t(16);let s=e[0],a=e[1],c=e[2];const u=Math.sqrt(s*s+a*a+c*c);s/=u,a/=u,c/=u;const h=s*s,f=a*a,l=c*c,d=Math.cos(r),m=Math.sin(r),M=1-d,w=h+(1-h)*d,p=s*a*M+c*m,v=s*c*M-a*m,g=s*a*M-c*m,x=f+(1-f)*d,b=a*c*M+s*m,y=s*c*M+a*m,q=a*c*M-s*m,S=l+(1-l)*d,_=n[0],A=n[1],z=n[2],P=n[3],E=n[4],T=n[5],V=n[6],B=n[7],U=n[8],O=n[9],R=n[10],C=n[11];return i[0]=w*_+p*E+v*U,i[1]=w*A+p*T+v*O,i[2]=w*z+p*V+v*R,i[3]=w*P+p*B+v*C,i[4]=g*_+x*E+b*U,i[5]=g*A+x*T+b*O,i[6]=g*z+x*V+b*R,i[7]=g*P+x*B+b*C,i[8]=y*_+q*E+S*U,i[9]=y*A+q*T+S*O,i[10]=y*z+q*V+S*R,i[11]=y*P+q*B+S*C,n!==i&&(i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i}return{create:function(n,e,r,o,i,s,a,c,u,h,f,l,d,m,M,w){const p=new t(16);return void 0!==n&&(p[0]=n,void 0!==e&&(p[1]=e,void 0!==r&&(p[2]=r,void 0!==o&&(p[3]=o,void 0!==i&&(p[4]=i,void 0!==s&&(p[5]=s,void 0!==a&&(p[6]=a,void 0!==c&&(p[7]=c,void 0!==u&&(p[8]=u,void 0!==h&&(p[9]=h,void 0!==f&&(p[10]=f,void 0!==l&&(p[11]=l,void 0!==d&&(p[12]=d,void 0!==m&&(p[13]=m,void 0!==M&&(p[14]=M,void 0!==w&&(p[15]=w)))))))))))))))),p},set:function(n,e,r,o,i,s,a,c,u,h,f,l,d,m,M,w,p){const v=p??new t(16);return v[0]=n,v[1]=e,v[2]=r,v[3]=o,v[4]=i,v[5]=s,v[6]=a,v[7]=c,v[8]=u,v[9]=h,v[10]=f,v[11]=l,v[12]=d,v[13]=m,v[14]=M,v[15]=w,v},fromMat3:function(n,e){const r=e??new t(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=0,r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=0,r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},fromQuat:function(n,e){const r=e??new t(16),o=n[0],i=n[1],s=n[2],a=n[3],c=o+o,u=i+i,h=s+s,f=o*c,l=i*c,d=i*u,m=s*c,M=s*u,w=s*h,p=a*c,v=a*u,g=a*h;return r[0]=1-d-w,r[1]=l+g,r[2]=m-v,r[3]=0,r[4]=l-g,r[5]=1-f-w,r[6]=M+p,r[7]=0,r[8]=m+v,r[9]=M-p,r[10]=1-f-d,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},negate:function(n,e){const r=e??new t(16);return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r[3]=-n[3],r[4]=-n[4],r[5]=-n[5],r[6]=-n[6],r[7]=-n[7],r[8]=-n[8],r[9]=-n[9],r[10]=-n[10],r[11]=-n[11],r[12]=-n[12],r[13]=-n[13],r[14]=-n[14],r[15]=-n[15],r},copy:e,clone:r,equalsApproximately:function(t,n){return Math.abs(t[0]-n[0])<s&&Math.abs(t[1]-n[1])<s&&Math.abs(t[2]-n[2])<s&&Math.abs(t[3]-n[3])<s&&Math.abs(t[4]-n[4])<s&&Math.abs(t[5]-n[5])<s&&Math.abs(t[6]-n[6])<s&&Math.abs(t[7]-n[7])<s&&Math.abs(t[8]-n[8])<s&&Math.abs(t[9]-n[9])<s&&Math.abs(t[10]-n[10])<s&&Math.abs(t[11]-n[11])<s&&Math.abs(t[12]-n[12])<s&&Math.abs(t[13]-n[13])<s&&Math.abs(t[14]-n[14])<s&&Math.abs(t[15]-n[15])<s},equals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},identity:o,transpose:function(n,e){const r=e??new t(16);if(r===n){let t;return t=n[1],n[1]=n[4],n[4]=t,t=n[2],n[2]=n[8],n[8]=t,t=n[3],n[3]=n[12],n[12]=t,t=n[6],n[6]=n[9],n[9]=t,t=n[7],n[7]=n[13],n[13]=t,t=n[11],n[11]=n[14],n[14]=t,r}const o=n[0],i=n[1],s=n[2],a=n[3],c=n[4],u=n[5],h=n[6],f=n[7],l=n[8],d=n[9],m=n[10],M=n[11],w=n[12],p=n[13],v=n[14],g=n[15];return r[0]=o,r[1]=c,r[2]=l,r[3]=w,r[4]=i,r[5]=u,r[6]=d,r[7]=p,r[8]=s,r[9]=h,r[10]=m,r[11]=v,r[12]=a,r[13]=f,r[14]=M,r[15]=g,r},inverse:i,determinant:function(t){const n=t[0],e=t[1],r=t[2],o=t[3],i=t[4],s=t[5],a=t[6],c=t[7],u=t[8],h=t[9],f=t[10],l=t[11],d=t[12],m=t[13],M=t[14],w=t[15],p=f*w,v=M*l,g=a*w,x=M*c,b=a*l,y=f*c,q=r*w,S=M*o,_=r*l,A=f*o,z=r*c,P=a*o;return n*(p*s+x*h+b*m-(v*s+g*h+y*m))+i*(v*e+q*h+A*m-(p*e+S*h+_*m))+u*(g*e+S*s+z*m-(x*e+q*s+P*m))+d*(y*e+_*s+P*h-(b*e+A*s+z*h))},invert:a,multiply:c,mul:u,setTranslation:function(t,n,e){const r=e??o();return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11]),r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r},getTranslation:function(t,e){const r=e??n.create();return r[0]=t[12],r[1]=t[13],r[2]=t[14],r},getAxis:function(t,e,r){const o=r??n.create(),i=4*e;return o[0]=t[i+0],o[1]=t[i+1],o[2]=t[i+2],o},setAxis:function(t,n,r,o){const i=o===t?o:e(t,o),s=4*r;return i[s+0]=n[0],i[s+1]=n[1],i[s+2]=n[2],i},getScaling:function(t,e){const r=e??n.create(),o=t[0],i=t[1],s=t[2],a=t[4],c=t[5],u=t[6],h=t[8],f=t[9],l=t[10];return r[0]=Math.sqrt(o*o+i*i+s*s),r[1]=Math.sqrt(a*a+c*c+u*u),r[2]=Math.sqrt(h*h+f*f+l*l),r},perspective:function(n,e,r,o,i){const s=i??new t(16),a=Math.tan(.5*Math.PI-.5*n);if(s[0]=a/e,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,Number.isFinite(o)){const t=1/(r-o);s[10]=o*t,s[14]=o*r*t}else s[10]=-1,s[14]=-r;return s},perspectiveReverseZ:function(n,e,r,o=1/0,i){const s=i??new t(16),a=1/Math.tan(.5*n);if(s[0]=a/e,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,o===1/0)s[10]=0,s[14]=r;else{const t=1/(o-r);s[10]=r*t,s[14]=o*r*t}return s},ortho:function(n,e,r,o,i,s,a){const c=a??new t(16);return c[0]=2/(e-n),c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=2/(o-r),c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1/(i-s),c[11]=0,c[12]=(e+n)/(n-e),c[13]=(o+r)/(r-o),c[14]=i/(i-s),c[15]=1,c},frustum:function(n,e,r,o,i,s,a){const c=a??new t(16),u=e-n,h=o-r,f=i-s;return c[0]=2*i/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=2*i/h,c[6]=0,c[7]=0,c[8]=(n+e)/u,c[9]=(o+r)/h,c[10]=s/f,c[11]=-1,c[12]=0,c[13]=0,c[14]=i*s/f,c[15]=0,c},frustumReverseZ:function(n,e,r,o,i,s=1/0,a){const c=a??new t(16),u=e-n,h=o-r;if(c[0]=2*i/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=2*i/h,c[6]=0,c[7]=0,c[8]=(n+e)/u,c[9]=(o+r)/h,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,s===1/0)c[10]=0,c[14]=i;else{const t=1/(s-i);c[10]=i*t,c[14]=s*i*t}return c},aim:function(e,r,o,i){const s=i??new t(16);return n.normalize(n.subtract(r,e,l),l),n.normalize(n.cross(o,l,h),h),n.normalize(n.cross(l,h,f),f),s[0]=h[0],s[1]=h[1],s[2]=h[2],s[3]=0,s[4]=f[0],s[5]=f[1],s[6]=f[2],s[7]=0,s[8]=l[0],s[9]=l[1],s[10]=l[2],s[11]=0,s[12]=e[0],s[13]=e[1],s[14]=e[2],s[15]=1,s},cameraAim:function(e,r,o,i){const s=i??new t(16);return n.normalize(n.subtract(e,r,l),l),n.normalize(n.cross(o,l,h),h),n.normalize(n.cross(l,h,f),f),s[0]=h[0],s[1]=h[1],s[2]=h[2],s[3]=0,s[4]=f[0],s[5]=f[1],s[6]=f[2],s[7]=0,s[8]=l[0],s[9]=l[1],s[10]=l[2],s[11]=0,s[12]=e[0],s[13]=e[1],s[14]=e[2],s[15]=1,s},lookAt:function(e,r,o,i){const s=i??new t(16);return n.normalize(n.subtract(e,r,l),l),n.normalize(n.cross(o,l,h),h),n.normalize(n.cross(l,h,f),f),s[0]=h[0],s[1]=f[0],s[2]=l[0],s[3]=0,s[4]=h[1],s[5]=f[1],s[6]=l[1],s[7]=0,s[8]=h[2],s[9]=f[2],s[10]=l[2],s[11]=0,s[12]=-(h[0]*e[0]+h[1]*e[1]+h[2]*e[2]),s[13]=-(f[0]*e[0]+f[1]*e[1]+f[2]*e[2]),s[14]=-(l[0]*e[0]+l[1]*e[1]+l[2]*e[2]),s[15]=1,s},translation:function(n,e){const r=e??new t(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r},translate:function(n,e,r){const o=r??new t(16),i=e[0],s=e[1],a=e[2],c=n[0],u=n[1],h=n[2],f=n[3],l=n[4],d=n[5],m=n[6],M=n[7],w=n[8],p=n[9],v=n[10],g=n[11],x=n[12],b=n[13],y=n[14],q=n[15];return n!==o&&(o[0]=c,o[1]=u,o[2]=h,o[3]=f,o[4]=l,o[5]=d,o[6]=m,o[7]=M,o[8]=w,o[9]=p,o[10]=v,o[11]=g),o[12]=c*i+l*s+w*a+x,o[13]=u*i+d*s+p*a+b,o[14]=h*i+m*s+v*a+y,o[15]=f*i+M*s+g*a+q,o},rotationX:function(n,e){const r=e??new t(16),o=Math.cos(n),i=Math.sin(n);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o,r[6]=i,r[7]=0,r[8]=0,r[9]=-i,r[10]=o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},rotateX:function(n,e,r){const o=r??new t(16),i=n[4],s=n[5],a=n[6],c=n[7],u=n[8],h=n[9],f=n[10],l=n[11],d=Math.cos(e),m=Math.sin(e);return o[4]=d*i+m*u,o[5]=d*s+m*h,o[6]=d*a+m*f,o[7]=d*c+m*l,o[8]=d*u-m*i,o[9]=d*h-m*s,o[10]=d*f-m*a,o[11]=d*l-m*c,n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o},rotationY:function(n,e){const r=e??new t(16),o=Math.cos(n),i=Math.sin(n);return r[0]=o,r[1]=0,r[2]=-i,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=i,r[9]=0,r[10]=o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},rotateY:function(n,e,r){const o=r??new t(16),i=n[0],s=n[1],a=n[2],c=n[3],u=n[8],h=n[9],f=n[10],l=n[11],d=Math.cos(e),m=Math.sin(e);return o[0]=d*i-m*u,o[1]=d*s-m*h,o[2]=d*a-m*f,o[3]=d*c-m*l,o[8]=d*u+m*i,o[9]=d*h+m*s,o[10]=d*f+m*a,o[11]=d*l+m*c,n!==o&&(o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o},rotationZ:function(n,e){const r=e??new t(16),o=Math.cos(n),i=Math.sin(n);return r[0]=o,r[1]=i,r[2]=0,r[3]=0,r[4]=-i,r[5]=o,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},rotateZ:function(n,e,r){const o=r??new t(16),i=n[0],s=n[1],a=n[2],c=n[3],u=n[4],h=n[5],f=n[6],l=n[7],d=Math.cos(e),m=Math.sin(e);return o[0]=d*i+m*u,o[1]=d*s+m*h,o[2]=d*a+m*f,o[3]=d*c+m*l,o[4]=d*u-m*i,o[5]=d*h-m*s,o[6]=d*f-m*a,o[7]=d*l-m*c,n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o},axisRotation:m,rotation:m,axisRotate:M,rotate:M,scaling:function(n,e){const r=e??new t(16);return r[0]=n[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=n[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},scale:function(n,e,r){const o=r??new t(16),i=e[0],s=e[1],a=e[2];return o[0]=i*n[0],o[1]=i*n[1],o[2]=i*n[2],o[3]=i*n[3],o[4]=s*n[4],o[5]=s*n[5],o[6]=s*n[6],o[7]=s*n[7],o[8]=a*n[8],o[9]=a*n[9],o[10]=a*n[10],o[11]=a*n[11],n!==o&&(o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o},uniformScaling:function(n,e){const r=e??new t(16);return r[0]=n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},uniformScale:function(n,e,r){const o=r??new t(16);return o[0]=e*n[0],o[1]=e*n[1],o[2]=e*n[2],o[3]=e*n[3],o[4]=e*n[4],o[5]=e*n[5],o[6]=e*n[6],o[7]=e*n[7],o[8]=e*n[8],o[9]=e*n[9],o[10]=e*n[10],o[11]=e*n[11],n!==o&&(o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o}}}(t),m.set(t,n)),n}const w=new Map;function p(t){let n=w.get(t);return n||(n=function(t){const n=d(t);function e(n,e,r,o){const i=new t(4);return void 0!==n&&(i[0]=n,void 0!==e&&(i[1]=e,void 0!==r&&(i[2]=r,void 0!==o&&(i[3]=o)))),i}const r=e;function o(n,e,r){const o=r??new t(4),i=.5*e,s=Math.sin(i);return o[0]=s*n[0],o[1]=s*n[1],o[2]=s*n[2],o[3]=Math.cos(i),o}function i(n,e,r){const o=r??new t(4),i=n[0],s=n[1],a=n[2],c=n[3],u=e[0],h=e[1],f=e[2],l=e[3];return o[0]=i*l+c*u+s*f-a*h,o[1]=s*l+c*h+a*u-i*f,o[2]=a*l+c*f+i*h-s*u,o[3]=c*l-i*u-s*h-a*f,o}const a=i;function c(n,e,r,o){const i=o??new t(4),a=n[0],c=n[1],u=n[2],h=n[3];let f,l,d=e[0],m=e[1],M=e[2],w=e[3],p=a*d+c*m+u*M+h*w;if(p<0&&(p=-p,d=-d,m=-m,M=-M,w=-w),1-p>s){const t=Math.acos(p),n=Math.sin(t);f=Math.sin((1-r)*t)/n,l=Math.sin(r*t)/n}else f=1-r,l=r;return i[0]=f*a+l*d,i[1]=f*c+l*m,i[2]=f*u+l*M,i[3]=f*h+l*w,i}function u(n,e){const r=e??new t(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}const h=u;function f(n,e,r){const o=r??new t(4);return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],o[3]=n[3]-e[3],o}const l=f;function m(n,e,r){const o=r??new t(4);return o[0]=n[0]*e,o[1]=n[1]*e,o[2]=n[2]*e,o[3]=n[3]*e,o}const M=m;function w(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function p(t){const n=t[0],e=t[1],r=t[2],o=t[3];return Math.sqrt(n*n+e*e+r*r+o*o)}const v=p;function g(t){const n=t[0],e=t[1],r=t[2],o=t[3];return n*n+e*e+r*r+o*o}const x=g;function b(n,e){const r=e??new t(4),o=n[0],i=n[1],s=n[2],a=n[3],c=Math.sqrt(o*o+i*i+s*s+a*a);return c>1e-5?(r[0]=o/c,r[1]=i/c,r[2]=s/c,r[3]=a/c):(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}const y=n.create(),q=n.create(),S=n.create(),_=new t(4),A=new t(4);return{create:e,fromValues:r,set:function(n,e,r,o,i){const s=i??new t(4);return s[0]=n,s[1]=e,s[2]=r,s[3]=o,s},fromAxisAngle:o,toAxisAngle:function(t,e){const r=e??n.create(3),o=2*Math.acos(t[3]),i=Math.sin(.5*o);return i>s?(r[0]=t[0]/i,r[1]=t[1]/i,r[2]=t[2]/i):(r[0]=1,r[1]=0,r[2]=0),{angle:o,axis:r}},angle:function(t,n){const e=w(t,n);return Math.acos(2*e*e-1)},multiply:i,mul:a,rotateX:function(n,e,r){const o=r??new t(4),i=.5*e,s=n[0],a=n[1],c=n[2],u=n[3],h=Math.sin(i),f=Math.cos(i);return o[0]=s*f+u*h,o[1]=a*f+c*h,o[2]=c*f-a*h,o[3]=u*f-s*h,o},rotateY:function(n,e,r){const o=r??new t(4),i=.5*e,s=n[0],a=n[1],c=n[2],u=n[3],h=Math.sin(i),f=Math.cos(i);return o[0]=s*f-c*h,o[1]=a*f+u*h,o[2]=c*f+s*h,o[3]=u*f-a*h,o},rotateZ:function(n,e,r){const o=r??new t(4),i=.5*e,s=n[0],a=n[1],c=n[2],u=n[3],h=Math.sin(i),f=Math.cos(i);return o[0]=s*f+a*h,o[1]=a*f-s*h,o[2]=c*f+u*h,o[3]=u*f-c*h,o},slerp:c,inverse:function(n,e){const r=e??new t(4),o=n[0],i=n[1],s=n[2],a=n[3],c=o*o+i*i+s*s+a*a,u=c?1/c:0;return r[0]=-o*u,r[1]=-i*u,r[2]=-s*u,r[3]=a*u,r},conjugate:function(n,e){const r=e??new t(4);return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r[3]=n[3],r},fromMat:function(n,e){const r=e??new t(4),o=n[0]+n[5]+n[10];if(o>0){const t=Math.sqrt(o+1);r[3]=.5*t;const e=.5/t;r[0]=(n[6]-n[9])*e,r[1]=(n[8]-n[2])*e,r[2]=(n[1]-n[4])*e}else{let t=0;n[5]>n[0]&&(t=1),n[10]>n[4*t+t]&&(t=2);const e=(t+1)%3,o=(t+2)%3,i=Math.sqrt(n[4*t+t]-n[4*e+e]-n[4*o+o]+1);r[t]=.5*i;const s=.5/i;r[3]=(n[4*e+o]-n[4*o+e])*s,r[e]=(n[4*e+t]+n[4*t+e])*s,r[o]=(n[4*o+t]+n[4*t+o])*s}return r},fromEuler:function(n,e,r,o,i){const s=i??new t(4),a=.5*n,c=.5*e,u=.5*r,h=Math.sin(a),f=Math.cos(a),l=Math.sin(c),d=Math.cos(c),m=Math.sin(u),M=Math.cos(u);switch(o){case"xyz":s[0]=h*d*M+f*l*m,s[1]=f*l*M-h*d*m,s[2]=f*d*m+h*l*M,s[3]=f*d*M-h*l*m;break;case"xzy":s[0]=h*d*M-f*l*m,s[1]=f*l*M-h*d*m,s[2]=f*d*m+h*l*M,s[3]=f*d*M+h*l*m;break;case"yxz":s[0]=h*d*M+f*l*m,s[1]=f*l*M-h*d*m,s[2]=f*d*m-h*l*M,s[3]=f*d*M+h*l*m;break;case"yzx":s[0]=h*d*M+f*l*m,s[1]=f*l*M+h*d*m,s[2]=f*d*m-h*l*M,s[3]=f*d*M-h*l*m;break;case"zxy":s[0]=h*d*M-f*l*m,s[1]=f*l*M+h*d*m,s[2]=f*d*m+h*l*M,s[3]=f*d*M-h*l*m;break;case"zyx":s[0]=h*d*M-f*l*m,s[1]=f*l*M+h*d*m,s[2]=f*d*m-h*l*M,s[3]=f*d*M+h*l*m;break;default:throw new Error(`Unknown rotation order: ${o}`)}return s},copy:u,clone:h,add:function(n,e,r){const o=r??new t(4);return o[0]=n[0]+e[0],o[1]=n[1]+e[1],o[2]=n[2]+e[2],o[3]=n[3]+e[3],o},subtract:f,sub:l,mulScalar:m,scale:M,divScalar:function(n,e,r){const o=r??new t(4);return o[0]=n[0]/e,o[1]=n[1]/e,o[2]=n[2]/e,o[3]=n[3]/e,o},dot:w,lerp:function(n,e,r,o){const i=o??new t(4);return i[0]=n[0]+r*(e[0]-n[0]),i[1]=n[1]+r*(e[1]-n[1]),i[2]=n[2]+r*(e[2]-n[2]),i[3]=n[3]+r*(e[3]-n[3]),i},length:p,len:v,lengthSq:g,lenSq:x,normalize:b,equalsApproximately:function(t,n){return Math.abs(t[0]-n[0])<s&&Math.abs(t[1]-n[1])<s&&Math.abs(t[2]-n[2])<s&&Math.abs(t[3]-n[3])<s},equals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},identity:function(n){const e=n??new t(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},rotationTo:function(e,r,i){const s=i??new t(4),a=n.dot(e,r);return a<-.999999?(n.cross(q,e,y),n.len(y)<1e-6&&n.cross(S,e,y),n.normalize(y,y),o(y,Math.PI,s),s):a>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(n.cross(e,r,y),s[0]=y[0],s[1]=y[1],s[2]=y[2],s[3]=1+a,b(s,s))},sqlerp:function(n,e,r,o,i,s){const a=s??new t(4);return c(n,o,i,_),c(e,r,i,A),c(_,A,2*i*(1-i),a),a}}}(t),w.set(t,n)),n}const v=new Map;function g(t){let n=v.get(t);return n||(n=function(t){function n(n,e,r,o){const i=new t(4);return void 0!==n&&(i[0]=n,void 0!==e&&(i[1]=e,void 0!==r&&(i[2]=r,void 0!==o&&(i[3]=o)))),i}function e(n,e,r){const o=r??new t(4);return o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2],o[3]=n[3]-e[3],o}function r(n,e,r,o){const i=o??new t(4);return i[0]=n[0]+r*(e[0]-n[0]),i[1]=n[1]+r*(e[1]-n[1]),i[2]=n[2]+r*(e[2]-n[2]),i[3]=n[3]+r*(e[3]-n[3]),i}function o(n,e,r){const o=r??new t(4);return o[0]=n[0]*e,o[1]=n[1]*e,o[2]=n[2]*e,o[3]=n[3]*e,o}function i(n,e){const r=e??new t(4);return r[0]=1/n[0],r[1]=1/n[1],r[2]=1/n[2],r[3]=1/n[3],r}function a(t){const n=t[0],e=t[1],r=t[2],o=t[3];return Math.sqrt(n*n+e*e+r*r+o*o)}function c(t){const n=t[0],e=t[1],r=t[2],o=t[3];return n*n+e*e+r*r+o*o}function u(t,n){const e=t[0]-n[0],r=t[1]-n[1],o=t[2]-n[2],i=t[3]-n[3];return Math.sqrt(e*e+r*r+o*o+i*i)}function h(t,n){const e=t[0]-n[0],r=t[1]-n[1],o=t[2]-n[2],i=t[3]-n[3];return e*e+r*r+o*o+i*i}function f(n,e){const r=e??new t(4),o=n[0],i=n[1],s=n[2],a=n[3],c=Math.sqrt(o*o+i*i+s*s+a*a);return c>1e-5?(r[0]=o/c,r[1]=i/c,r[2]=s/c,r[3]=a/c):(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function l(n,e){const r=e??new t(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r}function d(n,e,r){const o=r??new t(4);return o[0]=n[0]*e[0],o[1]=n[1]*e[1],o[2]=n[2]*e[2],o[3]=n[3]*e[3],o}function m(n,e,r){const o=r??new t(4);return o[0]=n[0]/e[0],o[1]=n[1]/e[1],o[2]=n[2]/e[2],o[3]=n[3]/e[3],o}function M(n,e,r){const i=r??new t(4);return f(n,i),o(i,e,i)}return{create:n,fromValues:n,set:function(n,e,r,o,i){const s=i??new t(4);return s[0]=n,s[1]=e,s[2]=r,s[3]=o,s},ceil:function(n,e){const r=e??new t(4);return r[0]=Math.ceil(n[0]),r[1]=Math.ceil(n[1]),r[2]=Math.ceil(n[2]),r[3]=Math.ceil(n[3]),r},floor:function(n,e){const r=e??new t(4);return r[0]=Math.floor(n[0]),r[1]=Math.floor(n[1]),r[2]=Math.floor(n[2]),r[3]=Math.floor(n[3]),r},round:function(n,e){const r=e??new t(4);return r[0]=Math.round(n[0]),r[1]=Math.round(n[1]),r[2]=Math.round(n[2]),r[3]=Math.round(n[3]),r},clamp:function(n,e=0,r=1,o){const i=o??new t(4);return i[0]=Math.min(r,Math.max(e,n[0])),i[1]=Math.min(r,Math.max(e,n[1])),i[2]=Math.min(r,Math.max(e,n[2])),i[3]=Math.min(r,Math.max(e,n[3])),i},add:function(n,e,r){const o=r??new t(4);return o[0]=n[0]+e[0],o[1]=n[1]+e[1],o[2]=n[2]+e[2],o[3]=n[3]+e[3],o},addScaled:function(n,e,r,o){const i=o??new t(4);return i[0]=n[0]+e[0]*r,i[1]=n[1]+e[1]*r,i[2]=n[2]+e[2]*r,i[3]=n[3]+e[3]*r,i},subtract:e,sub:e,equalsApproximately:function(t,n){return Math.abs(t[0]-n[0])<s&&Math.abs(t[1]-n[1])<s&&Math.abs(t[2]-n[2])<s&&Math.abs(t[3]-n[3])<s},equals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},lerp:r,lerpV:function(n,e,r,o){const i=o??new t(4);return i[0]=n[0]+r[0]*(e[0]-n[0]),i[1]=n[1]+r[1]*(e[1]-n[1]),i[2]=n[2]+r[2]*(e[2]-n[2]),i[3]=n[3]+r[3]*(e[3]-n[3]),i},max:function(n,e,r){const o=r??new t(4);return o[0]=Math.max(n[0],e[0]),o[1]=Math.max(n[1],e[1]),o[2]=Math.max(n[2],e[2]),o[3]=Math.max(n[3],e[3]),o},min:function(n,e,r){const o=r??new t(4);return o[0]=Math.min(n[0],e[0]),o[1]=Math.min(n[1],e[1]),o[2]=Math.min(n[2],e[2]),o[3]=Math.min(n[3],e[3]),o},mulScalar:o,scale:o,divScalar:function(n,e,r){const o=r??new t(4);return o[0]=n[0]/e,o[1]=n[1]/e,o[2]=n[2]/e,o[3]=n[3]/e,o},inverse:i,invert:i,dot:function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},length:a,len:a,lengthSq:c,lenSq:c,distance:u,dist:u,distanceSq:h,distSq:h,normalize:f,negate:function(n,e){const r=e??new t(4);return r[0]=-n[0],r[1]=-n[1],r[2]=-n[2],r[3]=-n[3],r},copy:l,clone:l,multiply:d,mul:d,divide:m,div:m,zero:function(n){const e=n??new t(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},transformMat4:function(n,e,r){const o=r??new t(4),i=n[0],s=n[1],a=n[2],c=n[3];return o[0]=e[0]*i+e[4]*s+e[8]*a+e[12]*c,o[1]=e[1]*i+e[5]*s+e[9]*a+e[13]*c,o[2]=e[2]*i+e[6]*s+e[10]*a+e[14]*c,o[3]=e[3]*i+e[7]*s+e[11]*a+e[15]*c,o},setLength:M,truncate:function(n,e,r){const o=r??new t(4);return a(n)>e?M(n,e,o):l(n,o)},midpoint:function(n,e,o){return r(n,e,.5,o??new t(4))}}}(t),v.set(t,n)),n}function x(t,n,e,r,o,i){return{mat4:M(t),mat3:f(n),quat:p(e),vec2:u(r),vec3:d(o),vec4:g(i)}}const{mat4:b,mat3:y,quat:q,vec2:S,vec3:_,vec4:A}=x(Float32Array,Float32Array,Float32Array,Float32Array,Float32Array,Float32Array),{mat4:z,mat3:P,quat:E,vec2:T,vec3:V,vec4:B}=x(Float64Array,Float64Array,Float64Array,Float64Array,Float64Array,Float64Array),{mat4:U,mat3:O,quat:R,vec2:C,vec3:k,vec4:F}=x(r,Array,Array,Array,Array,Array)}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return t[r].call(i.exports,i,i.exports,e),i.exports}e.d=(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e("./src/index.ts")})();
//# sourceMappingURL=bundle.min.js.map